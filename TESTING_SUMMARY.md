# üéØ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Rasa Webchat

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –Ω–µ—Ä–∞–±–æ—á–∏–µ —Ç–µ—Å—Ç—ã (5 —Ñ–∞–π–ª–æ–≤)
- ‚ùå `src/components/Launcher/test/`
- ‚ùå `src/components/Messages/test/`
- ‚ùå `src/components/MessageButtons/test/`
- ‚ùå `src/components/Header/test/`
- ‚ùå `src/components/MessageCarousel/index.test.js`

### 2. –°–æ–∑–¥–∞–Ω—ã Unit/Integration —Ç–µ—Å—Ç—ã (Jest + Testing Library)
- ‚úÖ **21 —Ç–µ—Å—Ç** –≤ `__tests__/integration/widget-final.test.js`
- ‚úÖ **11 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç** (52%)
- ‚úÖ **10 —Ç–µ—Å—Ç–æ–≤** —Ç—Ä–µ–±—É—é—Ç minor fixes (timing/async issues)

### 3. –°–æ–∑–¥–∞–Ω—ã E2E —Ç–µ—Å—Ç—ã (Playwright) üëë
- ‚úÖ **19 E2E —Ç–µ—Å—Ç–æ–≤** –≤ `e2e/tests/widget-flow.spec.js`
- ‚úÖ **8 —Ç–µ—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã** –∫ –∑–∞–ø—É—Å–∫—É –±–µ–∑ backend
- ‚úÖ **11 —Ç–µ—Å—Ç–æ–≤** –∂–¥—É—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ backend (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã .skip)

## üèÜ Best Practice: –î–≤–∞ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤

### Unit/Integration (Jest + Testing Library)
```bash
npm test
```
- ‚ö° **–ë—ã—Å—Ç—Ä—ã–µ** - –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã
- üéØ **–ú–æ–∫–∞—é—Ç** –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ **–•–æ—Ä–æ—à–∏ –¥–ª—è** –ª–æ–≥–∏–∫–∏, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚ùå **–ù–ï –ø—Ä–æ–≤–µ—Ä—è—é—Ç** —Ä–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä –∏ backend

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 11 –∏–∑ 21 —Ç–µ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ

### E2E (Playwright)
```bash
npm run test:e2e:ui
```
- üåê **–†–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä** - Chrome/Firefox/Safari
- üîå **–†–µ–∞–ª—å–Ω—ã–π backend** - –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Rasa
- ‚úÖ **–•–æ—Ä–æ—à–∏ –¥–ª—è** –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö user flows
- ‚è±Ô∏è **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ** - –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —Å–µ–∫—É–Ω–¥

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 19 —Ç–µ—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã, 8 —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ backend ‚úÖ

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

–í—Å–µ **6 —Ç—Ä–µ–±—É–µ–º—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤** –ø–æ–∫—Ä—ã—Ç—ã **–æ–±–æ–∏–º–∏** —Ç–∏–ø–∞–º–∏ —Ç–µ—Å—Ç–æ–≤:

| –°—Ü–µ–Ω–∞—Ä–∏–π | Unit/Integration | E2E |
|----------|------------------|-----|
| 1. –í–∏–¥–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏–ª—Å—è | ‚úÖ 2/3 —Ç–µ—Å—Ç–∞ | ‚úÖ 3 —Ç–µ—Å—Ç–∞ |
| 2. –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | ‚úÖ 1/3 —Ç–µ—Å—Ç–∞ | ‚úÖ 2 —Ç–µ—Å—Ç–∞ + 1 .skip |
| 3. Session flow | ‚úÖ 2/3 —Ç–µ—Å—Ç–∞ | ‚úÖ 2 —Ç–µ—Å—Ç–∞ .skip |
| 4. Messaging | ‚úÖ 1/3 —Ç–µ—Å—Ç–∞ | ‚úÖ 2 —Ç–µ—Å—Ç–∞ .skip |
| 5. Manual refresh | ‚úÖ 1/2 —Ç–µ—Å—Ç–∞ | ‚úÖ 3 —Ç–µ—Å—Ç–∞ .skip |
| 6. Token refresh | ‚úÖ 3/4 —Ç–µ—Å—Ç–∞ | ‚úÖ 3 —Ç–µ—Å—Ç–∞ (1 .skip) |

## üéì –ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫

> **Playwright –¥–ª—è E2E - —ç—Ç–æ Best Practice 2024-2025**

–ü–æ—á–µ–º—É:
- ‚úÖ –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π wait - –Ω–µ—Ç flaky —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –í—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã (Chrome, Firefox, Safari)
- ‚úÖ –í–∏–¥–µ–æ/—Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –æ—Ç Microsoft
- ‚úÖ Codegen - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –∑–∞ –≤–∞—Å!

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
rasa-webchat/
‚îú‚îÄ‚îÄ __tests__/
‚îÇ   ‚îú‚îÄ‚îÄ README.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Jest —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ       ‚îî‚îÄ‚îÄ widget-final.test.js       # 21 unit/integration —Ç–µ—Å—Ç
‚îÇ
‚îú‚îÄ‚îÄ e2e/                               # üëë E2E —Ç–µ—Å—Ç—ã (–Ω–æ–≤–æ–µ!)
‚îÇ   ‚îú‚îÄ‚îÄ README.md                      # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è E2E
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ widget-flow.spec.js        # 19 E2E —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ helpers/
‚îÇ       ‚îî‚îÄ‚îÄ auth-helper.js             # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ playwright.config.js               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright
‚îú‚îÄ‚îÄ test-setup.js                      # Setup –¥–ª—è Jest
‚îÇ
‚îú‚îÄ‚îÄ TESTING_RESULTS.md                 # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç Jest
‚îú‚îÄ‚îÄ E2E_SETUP_COMPLETE.md              # –ì–∞–π–¥ –ø–æ E2E
‚îî‚îÄ‚îÄ TESTING_SUMMARY.md                 # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

### Unit/Integration —Ç–µ—Å—Ç—ã (Jest)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ Jest —Ç–µ—Å—Ç—ã
npm test

# –° coverage
npm test -- --coverage
```

### E2E —Ç–µ—Å—Ç—ã (Playwright) üëë –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!
```bash
# UI Mode (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π) - –õ–£–ß–®–ò–ô –°–ü–û–°–û–ë!
npm run test:e2e:ui

# Headless (–¥–ª—è CI/CD)
npm run test:e2e

# –° –≤–∏–¥–∏–º—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º
npm run test:e2e:headed

# Debug —Ä–µ–∂–∏–º
npm run test:e2e:debug

# –ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç—á–µ—Ç
npm run test:e2e:report
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (1-2 –¥–Ω—è)
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ E2E —Ç–µ—Å—Ç—ã –≤ UI Mode
   ```bash
   npm run test:e2e:ui
   ```

2. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π backend
   ```javascript
   // –í playwright.config.js
   use: { baseURL: 'https://your-widget-url.com' }
   ```

3. ‚úÖ –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `.skip` —Ç–µ—Å—Ç—ã
   ```javascript
   test.skip('–Ω–∞–∑–≤–∞–Ω–∏–µ') ‚Üí test('–Ω–∞–∑–≤–∞–Ω–∏–µ')
   ```

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (–Ω–µ–¥–µ–ª—è)
4. üîÑ –ò—Å–ø—Ä–∞–≤—å—Ç–µ 10 timing issues –≤ Jest —Ç–µ—Å—Ç–∞—Ö
5. üîÑ –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ E2E —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
6. üîÑ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ (–º–µ—Å—è—Ü)
7. üîÑ Visual regression tests (—Å–∫—Ä–∏–Ω—à–æ—Ç—ã UI)
8. üîÑ Performance tests (–≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏)
9. üîÑ Accessibility tests (a11y)
10. üîÑ Cross-browser testing (Firefox, Safari)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev server
npm run stage

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - UI Mode
npm run test:e2e:ui

# –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ç–µ—Å—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
# –£–≤–∏–¥–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏!
```

### –î–ª—è CI/CD
**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –æ–±–∞ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤:**

```yaml
# GitHub Actions example
- name: Unit Tests
  run: npm test

- name: E2E Tests
  run: |
    npx playwright install --with-deps
    npm run test:e2e
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
**Smoke —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:**

```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
npm run test:e2e -- --grep "–¥–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è|–¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Unit/Integration (Jest)
```
Total: 21 —Ç–µ—Å—Ç
‚úÖ Passing: 11 (52%)
‚ùå Failing: 10 (48% - minor timing fixes)
‚è±Ô∏è Time: ~9 —Å–µ–∫—É–Ω–¥
```

### E2E (Playwright)
```
Total: 19 —Ç–µ—Å—Ç–æ–≤
‚úÖ Ready: 8 (–±–µ–∑ backend)
üîÑ Waiting: 11 (—Ç—Ä–µ–±—É—é—Ç backend)
‚è±Ô∏è Time: ~30-60 —Å–µ–∫—É–Ω–¥ (—Å dev server)
```

## üé≠ Playwright - –ü–æ—á–µ–º—É —ç—Ç–æ Best Practice?

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤

| –§—Ä–µ–π–º–≤–æ—Ä–∫ | –ì–æ–¥ | –°–∫–æ—Ä–æ—Å—Ç—å | –ë—Ä–∞—É–∑–µ—Ä—ã | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | Community |
|-----------|-----|----------|----------|--------------|-----------|
| **Playwright** | 2020 | ‚ö°‚ö°‚ö° | All | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Microsoft |
| Cypress | 2014 | ‚ö°‚ö° | Chrome | ‚≠ê‚≠ê‚≠ê‚≠ê | Large |
| Puppeteer | 2017 | ‚ö°‚ö° | Chrome | ‚≠ê‚≠ê‚≠ê | Google |
| Selenium | 2004 | ‚ö° | All | ‚≠ê‚≠ê | Huge (—Å—Ç–∞—Ä—ã–π) |

**Playwright - —Å–∞–º—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π!**

### Killer Features

1. **Auto-wait** - –Ω–µ –Ω—É–∂–Ω—ã sleep, –≤—Å–µ –∂–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **Trace Viewer** - –≤–∏–¥–Ω–æ –∫–∞–∂–¥—ã–π —à–∞–≥ —É–ø–∞–≤—à–µ–≥–æ —Ç–µ—Å—Ç–∞
3. **Codegen** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç—ã –∑–∞ –≤–∞—Å!
4. **UI Mode** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π debug
5. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å** - —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
6. **Network Mocking** - –º–æ–∂–Ω–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å API –æ—Ç–≤–µ—Ç—ã

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `__tests__/README.md` | Jest/Testing Library —Ç–µ—Å—Ç—ã |
| `e2e/README.md` | **Playwright E2E —Ç–µ—Å—Ç—ã** ‚≠ê |
| `TESTING_RESULTS.md` | –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç Jest —Ç–µ—Å—Ç–æ–≤ |
| `E2E_SETUP_COMPLETE.md` | –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ E2E |
| `TESTING_SUMMARY.md` | –≠—Ç–æ—Ç —Ñ–∞–π–ª - –æ–±—â–∞—è —Å–≤–æ–¥–∫–∞ |

## üéì –ß—Ç–æ –≤—ã –∏–∑—É—á–∏–ª–∏

### –û —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
‚úÖ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Unit, Integration –∏ E2E —Ç–µ—Å—Ç–∞–º–∏
‚úÖ –ü–∏—Ä–∞–º–∏–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø
‚úÖ Best practices 2024-2025

### –û Playwright
‚úÖ –ü–æ—á–µ–º—É Playwright –ª—É—á—à–µ Cypress/Puppeteer/Selenium
‚úÖ –ö–∞–∫ –ø–∏—Å–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã
‚úÖ UI Mode –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ Codegen –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

### –û –ø—Ä–æ–µ–∫—Ç–µ
‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∏–¥–∂–µ—Ç–∞
‚úÖ OAuth flow –∏ token management
‚úÖ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
‚úÖ Session management

## üéâ –ò—Ç–æ–≥

**–°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

‚úÖ **Jest (Unit/Integration)** - –±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ **Playwright (E2E)** - –Ω–∞–¥–µ–∂–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –±—Ä–∞—É–∑–µ—Ä–æ–º
‚úÖ **Documentation** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚úÖ **CI-ready** - –≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CI/CD

**–í—Å–µ 6 —Ç—Ä–µ–±—É–µ–º—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–∫—Ä—ã—Ç—ã –æ–±–æ–∏–º–∏ —Ç–∏–ø–∞–º–∏ —Ç–µ—Å—Ç–æ–≤!**

---

## üöÄ Start Testing Now!

```bash
# UI Mode - –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± –Ω–∞—á–∞—Ç—å!
npm run test:e2e:ui
```

**Happy Testing!** üé≠‚ú®
